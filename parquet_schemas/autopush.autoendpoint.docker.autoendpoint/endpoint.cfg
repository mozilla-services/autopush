-- vim:ft=lua
message_matcher = message_matcher .. " && (Fields[Fields.router_key] == 'webpush' || Fields[Fields.router_key] == 'simplepush') && Fields[remote_ip] != NIL"

s3_path_dimensions = {
	{name="log", source="Type"},
	{name="router_key", source="Fields[Fields.router_key]"},
	{name="date", source="Fields[Date]"},
	{name="hour", source="Fields[Hour]"},
}

parquet_schema = [=[
message Log {
    required int64 Timestamp;
    optional binary Type (UTF8);
    optional binary Hostname (UTF8);
    optional binary Logger (UTF8);
    optional binary EnvVersion (UTF8);
    optional int64 Severity;
    optional int64 Pid;

    optional binary fields_remote_ip (UTF8);
    optional binary fields_uaid_hash (UTF8);
    optional binary fields_message (UTF8);
    optional boolean fields_error;
    optional binary fields_user_agent (UTF8);
    optional binary fields_task_uuid (UTF8);
    optional binary fields_channelid (UTF8);
    optional binary fields_system (UTF8);
}
]=]
